# CAN 통신

## 도입
올해 이직한 회사에서 CAN통신과 관련된 부분을 담당하게 됬다.  
CAN 통신에 대해 스터디한 내용을 남겨보려고 한다.  
개발 중에 어려웠던 부분, 어떻게 해결했는지도 될수 있으면 기롤해보려고 한다.  

## CAN 통신,, 간단한 정의, 특징

## CAN 프로토콜

## 시뮬레이션 툴들
보통 메시지 들이 기록된 DBC파일로 시뮬레이션을 하곤 한다.  
DBC 파일은 Vector사에서 만든 툴에서 사용하는 포멧이었지만, 표준처럼 자리잡았다.  
busmaster나 kvaser를 사용하면 DBC파일을 읽고 편집하는 것이 가능하다.  
busmaster는 시뮬레이션도 제공하는데, CAN-FD프로토콜에 대해서는 제공되지 않는다(3.2.12)버전에서 제외되었다.  
그래서 PCAN장비를 CAN을 사용하는 장비로 바꾸고 확인해봐도 프로그램과 시뮬레이션 시에 에러가 발생한다..  
ACK를 받지 못해서 발생하는 에러로 보이지만,,  
PCAN-View로 보내면 프로그램에서 해당 메시지가 정상적으로 수신되는 것이 확인되지만 동일하게 ACK에러가 난다  
PCAN-View는 메시지를 직접 일일히 작성해주어야한다.. -> PCAN용 다른 툴을 찾아보기 시작했다..  
그러다 발견한 툴이 아래 프로그램이다..  
CANdevStudio라는 프로그램인데, 오픈소스로 개발되고 있다.  
https://github.com/GENIVI/CANdevStudio/releases
Qt5.12를 설치해야한다..
Qt5.12를 이용해서 제품개발하는 것이 아니라 툴을 사용하는 것이니, 라이센스로 문제가 되지는 않을 것이다.
  
  
CAN DBC 파일은 아래 경로에서 다양한 차종의 DBC 파일을 구할 수 있다.  
사실 CANdevStudio도 opendbc를 검색해보다가 알게되었다.  
https://github.com/commaai/opendbc
  
